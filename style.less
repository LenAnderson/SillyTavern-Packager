.popup:has(.stpkg--export, .stpkg--import--XXX) {
	aspect-ratio: unset;
	width: unset;
}



.stpkg--export {
	--stpkg--ava-height: 144px;
	--stpkg--ava-width: 96px;
	--stpkg--bg-height: 90px;
	--stpkg--bg-width: 160px;
	.stpkg--sectionGroup {
		display: grid;
		gap: 1em;
		grid-template-columns: repeat(auto-fit, minmax(25rem, 1fr));
		.stpkg--section {
			flex: 1 1 32%;
		}
	}
	.stpkg--section {
		border: 1px solid var(--SmartThemeBorderColor);
		padding: 0.5em;
		position: relative;
		&:after {
			content: attr(data-count);
			position: absolute;
			top: 0.25em;
			right: 0.5em;
		}
		h4 {
			cursor: pointer;
		}
		.stpkg--content.stpkg--hidden {
			display: none;
		}
		.stpkg--query {
			display: flex;
			gap: 0.5em;
			align-items: baseline;
			justify-content: center;
			input {
				flex: 1 1 auto;
			}
		}
		.stpkg--grid {
			display: flex;
			gap: 1em;
			justify-content: flex-start;
			flex-wrap: wrap;
			.stpkg--item {
				background: var(--black30a);
				padding: 0.25em;
				border-radius: 5px;
				display: flex;
				flex-direction: column;
				gap: 0.25em;
				width: calc(0.5em + var(--stpkg--bg-width));
				.stpkg--name {
					flex: 1 1 auto;
					word-wrap: break-word;
				}
				.stpkg--actions {
					display: flex;
					flex-direction: column;
					align-items: center;
					font-size: smaller;
					opacity: 0.5;
					transition: 200ms;
					margin-top: 0.5em;
					> label {
						display: flex;
						gap: 0.5em;
						align-items: baseline;
					}
					&:hover {
						opacity: 1;
					}
				}
			}
		}

		&.stpkg--info {
			margin-bottom: 1em;
			.stpkg--content {
				display: flex;
				gap: 1em;
				justify-content: space-between;
				.stpkg--input {
					flex: 1 1 30%;
				}
			}
		}

		&.stpkg--char {
			.stpkg--grid {
				.stpkg--item {
					width: calc(0.5em + var(--stpkg--ava-width));
				}
				.stpkg--avatar {
					height: var(--stpkg--ava-height);
					width: var(--stpkg--ava-width);
				}
				.stpkg--name {
					width: var(--stpkg--ava-width);
				}
			}
		}

		&.stpkg--group {
			.stpkg--grid {
				.stpkg--item {
					width: calc(0.5em + var(--stpkg--ava-width));
				}
				.stpkg--avatar {
					height: var(--stpkg--ava-height);
					width: var(--stpkg--ava-width);
				}
				.stpkg--name {
					width: var(--stpkg--ava-width);
				}
			}
		}

		&.stpkg--bg {
			.stpkg--grid {
				.stpkg--bg {
					height: var(--stpkg--bg-height);
					width: var(--stpkg--bg-width);
				}
				.stpkg--name {
					width: var(--stpkg--bg-width);
				}
			}
		}

		&.stpkg--asset {
			// filter: blur(2px) grayscale(1);
		}
	}
}




.stpkg--import {
	--stpkg--ava-height: 144px;
	--stpkg--ava-width: 96px;
	--stpkg--bg-height: 90px;
	--stpkg--bg-width: 160px;
	.stpkg--section {
		border: 1px solid var(--SmartThemeBorderColor);
		padding: 0 0.5em 0.5em 0.5em;
		position: relative;
		margin-bottom: 1em;
		h4 {
			text-align: left;
		}
		.stpkg--grid {
			display: flex;
			gap: 1em;
			justify-content: flex-start;
			flex-wrap: wrap;
			.stpkg--item {
				background: var(--black30a);
				padding: 0.25em;
				border-radius: 5px;
				display: flex;
				align-items: center;
				flex-direction: column;
				gap: 0.25em;
				width: calc(0.5em + var(--stpkg--bg-width));
				opacity: 0.5;
				transition: 200ms;
				&.stpkg--isIncluded {
					opacity: 1;
				}
				.stpkg--name {
					flex: 1 1 auto;
					word-wrap: break-word;
				}
				.stpkg--actions {
					display: flex;
					flex-direction: column;
					align-self: stretch;
					font-size: smaller;
					transition: 200ms;
					margin-top: 0.5em;
					.stpkg--warning {
						font-size: 2em;
						margin: 0.25em 0;
						color: white;
						background-color: #BD362F;
						padding: 0.25em;
					}
					.stpkg--toggle {
						display: flex;
						.stpkg--pos, .stpkg--neg {
							flex: 1 1 1px;
							padding: 0.5em;
							cursor: pointer;
							color: white;
							filter: saturate(0.5);
							transition: 200ms;
							&:hover {
								filter: saturate(0.75);
							}
							&.stpkg--isSelected {
								filter: saturate(1);
								font-weight: bold;
							}
						}
						.stpkg--pos {
							background-color: #51A351;
							&:hover {
								filter: saturate(2);
							}
						}
						.stpkg--neg {
							background-color: #BD362F;
						}
					}
				}
			}
		}
		&.stpkg--info {
			border: none;
			padding: 0;
			.stpkg--version:before { content: " v"; }
			.stpkg--author:before { content: "by "; }
		}
		&.stpkg--characters {
			.stpkg--item {
				// width: calc(0.5em + var(--stpkg--ava-width));
			}
			.stpkg--avatar {
				height: var(--stpkg--ava-height);
				width: var(--stpkg--ava-width);
			}
			.stpkg--name {
				width: var(--stpkg--ava-width);
			}
		}
	}
}
